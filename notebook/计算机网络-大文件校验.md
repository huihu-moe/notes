# tcp的传输过程是可靠的，那为什么许多较大的下载最终还要校验文件完整性？？

内容摘抄自 [tcp的传输过程是可靠的，那为什么许多较大的下载最终还要校验文件完整性？](https://mp.weixin.qq.com/s?__biz=MjM5Njg5NDgwNA==&mid=2247489187&idx=1&sn=3552d095a9e92a0347fa1162e1f8f06c&chksm=a6e3179891949e8e08d84d49b3ce777cd0bc98522343b7adff9e805f3bd504b18f5e50d385e3&scene=178&cur_album_id=1532487451997454337#rd)

- TCP 的可靠传输就是保证在传送丢失或者是包校验和出错的时候重传，但 crc 校验只能大概判断一下，并不能保证数据 100% 正确。

- 传输层协议只保证传输过程的校验。假如发送方进程在部分数据还没有发送的时候，进程崩溃了，或者断点续传的时候断点计算漏了。这时候数据还没有进入到传输层，整体上也就无法保证了。

- 传输过程中我们的包要经过很多复杂的环境，在 HTTP 时代，中间的某个环节的运营商出于利益驱使完全是有能力修改传输的数据的（运营商劫持），当然现在 HTTPS 的广泛应用使得这种情况已经好多了。

- tcp 接收方传输层的 ack 确认其实只是确认的接收方的内核正确地收到了。这时候用户进程有没有收到其实不一定。假如用户进程还没来得及接收，进程崩溃了。或者读取内核中的数据时候发生了极低概率的内存翻转等错误，或者是说接收正确，但是写硬盘的时候出错了。